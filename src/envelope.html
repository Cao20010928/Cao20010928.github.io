<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/heart.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

</head>
<body>
    <div id="content" style="display: none">
        <div class="envlope-wrapper">
            <div id="envelope" class="close">
                <div class="front flap">
                    <div class="love" id="love">
                        <!--                    <div style="position:absolute; z-index: 999">小晨妹妹亲启</div>-->
                        <div style="position: absolute; z-index: 999; transform: rotate(45deg);
                    width: 120%;color: #eaad1a;font-family: 华文楷体;
                    /*left: 10px;*/
                    text-align: center;font-size: 14px">小晨妹妹<br>亲启</div>
                    </div>
                </div>
                <div class="front pocket">

                    <!--                <div class="love-1"></div>-->
                    <!--                <div class="love-2"></div>-->
                </div>

                <div class="letter">
                    <div class="text">
                        <span id="element" style="font-family: 华文行楷"></span>
                    </div>

                    <!--                <div class="words line1"></div>-->
                    <!--                <div class="words line2"></div>-->
                    <!--                <div class="words line3"></div>-->
                    <!--                <div class="words line4"></div>-->
                </div>
                <div class="hearts">
                    <div class="heart a1"></div>
                    <div class="heart a2"></div>
                    <div class="heart a3"></div>
                </div>
            </div>
        </div>
        <!--    <div class="reset">-->
        <!--        <button id="open">Open</button>-->
        <!--        <button id="reset">Reset</button>-->
        <!--    </div>-->
        <img src="img/1.png" id="i1" class="img">
        <img src="img/2.png" id="i2" class="img">
        <img src="img/3.png" id="i3" class="img">
        <div class="back"></div>
    </div>
    <div id="password-screen">
        <h1>请输入口令</h1>
        <input type="password" id="password-input" placeholder="输入口令">
        <button id="submit-btn">提交</button>
        <p id="error-message" style="color: red; display: none;">密码错误，请重试！</p>
    </div>
<!--    <script src="js/script.js" type="module"></script>-->
    <!-- Load library from the CDN -->
    <script src="https://unpkg.com/typed.js@2.1.0/dist/typed.umd.js"></script>

    <!-- Setup and start animation! -->
    <script>
        const envelope = document.getElementById('envelope');
        const typed = new Typed('#element', {
            strings: [
                '亲爱的小晨妹妹：<br>' +
                '情人节快乐！<br>' +
                '如果从去年2月2号算起，到今天我们已经在一起378天了。记得之前我给你写信是在考研成绩出来之后，' +
                '对你提到以后的计划和打算。其实当时很遗憾，二战意味着新的一年不能有很多时间陪伴你，之前做的计划也成了笑话。' +
                '不过好在我们还是在一起，虽然过程并不顺利，但幸运的是我们都没有放弃对方。<br>' +
                '我常常想，要是我们能早点在一起，我们就能陪伴彼此更多的时光，会有更多酸甜苦辣；要是我能一战上岸，我们会有更多的时间完成我们的' +
                '计划：一起实习、一起毕业旅行、一起坐火车。不过人生本就是聚少离多，又有什么好遗憾的呢。过去的就让它过去吧，' +
                '在新的一年里我们还会拥有更多回忆<br>' +
                '我们的故事还会继续书写……'
            ],
            typeSpeed: 100,
            startDelay: 1000,
            showCursor: true,
            cursorChar: '|',
            loop: false
        });
        
        // 初始隐藏打字效果
        typed.stop();
        $( document ).ready(function() {

            var envelope = $('#envelope');
            var btn_open = $("#open");
            var btn_reset = $("#reset");

            envelope.click( function() {
                if(envelope.hasClass("close"))
                    open();
                else
                    close();
            });
            // btn_open.click( function() {
            //     open();
            //     setTimeout(() => {
            //         typed.start();
            //     }, 1000);
            // });
            // btn_reset.click( function() {
            //     close();
            //     typed.reset();
            // });

            function open() {
                envelope.addClass("open")
                    .removeClass("close");
                setTimeout(() => {
                    typed.start();
                }, 1000);
            }
            function close() {
                envelope.addClass("close")
                    .removeClass("open");
                typed.reset();
            }

        });
        ////////////////////////////////////////////////////////////
        // 定义正确密码
        const correctPassword = "xcmm_i_like_you"; // 替换为你想要的密码

        // 获取元素
        const passwordScreen = document.getElementById("password-screen");
        const content = document.getElementById("content");
        const passwordInput = document.getElementById("password-input");
        const submitBtn = document.getElementById("submit-btn");
        const errorMessage = document.getElementById("error-message");

        // 提交按钮点击事件
        submitBtn.addEventListener("click", function () {
            const userInput = passwordInput.value; // 获取用户输入

            // 验证密码
            if (userInput === correctPassword) {
                // 密码正确，隐藏密码输入界面，显示内容
                passwordScreen.style.display = "none";
                content.style.display = "block";
            } else {
                // 密码错误，显示错误信息
                errorMessage.style.display = "block";
            }
        });

        // 按下回车键触发提交
        passwordInput.addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
                submitBtn.click(); // 模拟点击提交按钮
            }
        });
    </script>
</body>
</html>

